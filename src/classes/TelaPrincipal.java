package classes;

import java.awt.Color;
import java.awt.Component;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JButton;
import javax.swing.JOptionPane;
import javax.swing.JTextField;

/**
 *
 * @author Ilan Margolis
 * @date   2020-05-04
 * 
 */
public class TelaPrincipal extends javax.swing.JDialog {
    // CONSTANTES
    final int EDT_LIMPA   = 0;
    final int EDT_MOSTRA  = 1;
    final int EDT_PROCURA = 2;
    
    final int ST_DERROTA = -1;
    final int ST_JOGANDO = 0;
    final int ST_VITORIA = 1;
    
    // VARIÁVEIS
    int contAcertos, contErros;
    
    /**
     * CRIAR novo formulário TelaPrincipal
     */
    public TelaPrincipal(java.awt.Frame parent, boolean modal) {
        super(parent, modal);
        initComponents();
               
        configuraTeclado(); 
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        pnlForca = new javax.swing.JPanel();
        imgForca = new javax.swing.JLabel();
        pnlPalavra = new javax.swing.JPanel();
        lblDica = new javax.swing.JLabel();
        pnlTeclado = new javax.swing.JLayeredPane();
        btnI = new javax.swing.JButton();
        btnE = new javax.swing.JButton();
        btnL = new javax.swing.JButton();
        btnR = new javax.swing.JButton();
        btnW = new javax.swing.JButton();
        btnO = new javax.swing.JButton();
        btnP = new javax.swing.JButton();
        btnA = new javax.swing.JButton();
        btnS = new javax.swing.JButton();
        btnD = new javax.swing.JButton();
        btnF = new javax.swing.JButton();
        btnG = new javax.swing.JButton();
        btnH = new javax.swing.JButton();
        btnJ = new javax.swing.JButton();
        btnK = new javax.swing.JButton();
        btnT = new javax.swing.JButton();
        btnY = new javax.swing.JButton();
        btnU = new javax.swing.JButton();
        btnZ = new javax.swing.JButton();
        btnB = new javax.swing.JButton();
        btnN = new javax.swing.JButton();
        btnM = new javax.swing.JButton();
        btnX = new javax.swing.JButton();
        btnC = new javax.swing.JButton();
        btnV = new javax.swing.JButton();
        btnQ = new javax.swing.JButton();
        btnIniciar = new javax.swing.JButton();

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 100, Short.MAX_VALUE)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 100, Short.MAX_VALUE)
        );

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Jogo da Forca - Versão 0.2 - By Ilan Margolis ©2020");
        setResizable(false);

        pnlForca.setVerifyInputWhenFocusTarget(false);

        imgForca.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagens/forca0.png"))); // NOI18N
        imgForca.setMaximumSize(new java.awt.Dimension(68, 73));
        imgForca.setMinimumSize(new java.awt.Dimension(68, 73));
        imgForca.setPreferredSize(new java.awt.Dimension(68, 73));

        javax.swing.GroupLayout pnlForcaLayout = new javax.swing.GroupLayout(pnlForca);
        pnlForca.setLayout(pnlForcaLayout);
        pnlForcaLayout.setHorizontalGroup(
            pnlForcaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlForcaLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(imgForca, javax.swing.GroupLayout.DEFAULT_SIZE, 345, Short.MAX_VALUE))
        );
        pnlForcaLayout.setVerticalGroup(
            pnlForcaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlForcaLayout.createSequentialGroup()
                .addComponent(imgForca, javax.swing.GroupLayout.PREFERRED_SIZE, 373, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );

        pnlPalavra.setEnabled(false);
        pnlPalavra.setFocusable(false);

        lblDica.setText(" ");

        javax.swing.GroupLayout pnlPalavraLayout = new javax.swing.GroupLayout(pnlPalavra);
        pnlPalavra.setLayout(pnlPalavraLayout);
        pnlPalavraLayout.setHorizontalGroup(
            pnlPalavraLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlPalavraLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(lblDica)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        pnlPalavraLayout.setVerticalGroup(
            pnlPalavraLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlPalavraLayout.createSequentialGroup()
                .addComponent(lblDica)
                .addGap(0, 30, Short.MAX_VALUE))
        );

        pnlTeclado.setPreferredSize(new java.awt.Dimension(366, 130));

        btnI.setText("I");

        btnE.setText("E");

        btnL.setText("L");

        btnR.setText("R");

        btnW.setText("W");

        btnO.setText("O");

        btnP.setText("P");

        btnA.setText("A");

        btnS.setText("S");

        btnD.setText("D");

        btnF.setText("F");

        btnG.setText("G");

        btnH.setText("H");

        btnJ.setText("J");

        btnK.setText("K");

        btnT.setText("T");

        btnY.setText("Y");

        btnU.setText("U");

        btnZ.setText("Z");

        btnB.setText("B");

        btnN.setText("N");

        btnM.setText("M");

        btnX.setText("X");

        btnC.setText("C");

        btnV.setText("V");

        btnQ.setText("Q");

        btnIniciar.setText("INICIAR JOGO");

        pnlTeclado.setLayer(btnI, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnE, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnL, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnR, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnW, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnO, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnP, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnA, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnS, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnD, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnF, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnG, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnH, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnJ, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnK, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnT, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnY, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnU, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnZ, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnB, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnN, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnM, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnX, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnC, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnV, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnQ, javax.swing.JLayeredPane.DEFAULT_LAYER);
        pnlTeclado.setLayer(btnIniciar, javax.swing.JLayeredPane.DEFAULT_LAYER);

        javax.swing.GroupLayout pnlTecladoLayout = new javax.swing.GroupLayout(pnlTeclado);
        pnlTeclado.setLayout(pnlTecladoLayout);
        pnlTecladoLayout.setHorizontalGroup(
            pnlTecladoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlTecladoLayout.createSequentialGroup()
                .addComponent(btnQ)
                .addGroup(pnlTecladoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pnlTecladoLayout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(pnlTecladoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(pnlTecladoLayout.createSequentialGroup()
                                .addComponent(btnA)
                                .addGap(6, 6, 6)
                                .addComponent(btnS)
                                .addGap(6, 6, 6)
                                .addComponent(btnD)
                                .addGap(6, 6, 6)
                                .addComponent(btnF)
                                .addGap(6, 6, 6)
                                .addComponent(btnG)
                                .addGap(6, 6, 6)
                                .addComponent(btnH)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(btnJ)
                                .addGap(6, 6, 6)
                                .addComponent(btnK)
                                .addGap(6, 6, 6)
                                .addComponent(btnL))
                            .addGroup(pnlTecladoLayout.createSequentialGroup()
                                .addComponent(btnW)
                                .addGap(6, 6, 6)
                                .addComponent(btnE)
                                .addGap(6, 6, 6)
                                .addComponent(btnR)
                                .addGap(6, 6, 6)
                                .addComponent(btnT)
                                .addGap(6, 6, 6)
                                .addComponent(btnY)
                                .addGap(6, 6, 6)
                                .addComponent(btnU)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(btnI)
                                .addGap(6, 6, 6)
                                .addComponent(btnO)
                                .addGap(6, 6, 6)
                                .addComponent(btnP)))
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(pnlTecladoLayout.createSequentialGroup()
                        .addGap(5, 5, 5)
                        .addComponent(btnZ)
                        .addGap(8, 8, 8)
                        .addGroup(pnlTecladoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(pnlTecladoLayout.createSequentialGroup()
                                .addGap(20, 20, 20)
                                .addComponent(btnIniciar, javax.swing.GroupLayout.PREFERRED_SIZE, 201, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(pnlTecladoLayout.createSequentialGroup()
                                .addComponent(btnX)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(btnC)
                                .addGap(6, 6, 6)
                                .addComponent(btnV)
                                .addGap(6, 6, 6)
                                .addComponent(btnB)
                                .addGap(6, 6, 6)
                                .addComponent(btnN)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(btnM)))
                        .addContainerGap(108, Short.MAX_VALUE))))
        );
        pnlTecladoLayout.setVerticalGroup(
            pnlTecladoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnlTecladoLayout.createSequentialGroup()
                .addGroup(pnlTecladoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(btnQ)
                    .addGroup(pnlTecladoLayout.createSequentialGroup()
                        .addGroup(pnlTecladoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(btnW)
                            .addComponent(btnE)
                            .addComponent(btnR)
                            .addComponent(btnT)
                            .addComponent(btnY)
                            .addComponent(btnU)
                            .addComponent(btnI)
                            .addComponent(btnO)
                            .addComponent(btnP))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(pnlTecladoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(btnA)
                            .addComponent(btnS)
                            .addComponent(btnD)
                            .addComponent(btnF)
                            .addComponent(btnG)
                            .addComponent(btnH)
                            .addComponent(btnJ)
                            .addComponent(btnK)
                            .addComponent(btnL))))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(pnlTecladoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnlTecladoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(btnZ)
                        .addComponent(btnX)
                        .addComponent(btnC)
                        .addComponent(btnV)
                        .addComponent(btnB)
                        .addComponent(btnN))
                    .addComponent(btnM))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(btnIniciar, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(14, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(40, 40, 40)
                        .addComponent(pnlForca, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(pnlPalavra, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(pnlTeclado, javax.swing.GroupLayout.DEFAULT_SIZE, 387, Short.MAX_VALUE))))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(pnlForca, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(pnlPalavra, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(pnlTeclado, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(20, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents
    
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(TelaPrincipal.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(TelaPrincipal.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(TelaPrincipal.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(TelaPrincipal.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the dialog */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                TelaPrincipal dialog = new TelaPrincipal(new javax.swing.JFrame(), true);
                dialog.addWindowListener(new java.awt.event.WindowAdapter() {
                    @Override
                    public void windowClosing(java.awt.event.WindowEvent e) {
                        System.exit(0);
                    }
                });
                                 
                dialog.setLocationRelativeTo(null); // centraliza formulário na tela
                dialog.setSize(440, 600); // fixa o tamanho do formulário
                dialog.setVisible(true);  // torna o fomulário visível              
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnA;
    private javax.swing.JButton btnB;
    private javax.swing.JButton btnC;
    private javax.swing.JButton btnD;
    private javax.swing.JButton btnE;
    private javax.swing.JButton btnF;
    private javax.swing.JButton btnG;
    private javax.swing.JButton btnH;
    private javax.swing.JButton btnI;
    private javax.swing.JButton btnIniciar;
    private javax.swing.JButton btnJ;
    private javax.swing.JButton btnK;
    private javax.swing.JButton btnL;
    private javax.swing.JButton btnM;
    private javax.swing.JButton btnN;
    private javax.swing.JButton btnO;
    private javax.swing.JButton btnP;
    private javax.swing.JButton btnQ;
    private javax.swing.JButton btnR;
    private javax.swing.JButton btnS;
    private javax.swing.JButton btnT;
    private javax.swing.JButton btnU;
    private javax.swing.JButton btnV;
    private javax.swing.JButton btnW;
    private javax.swing.JButton btnX;
    private javax.swing.JButton btnY;
    private javax.swing.JButton btnZ;
    private javax.swing.JLabel imgForca;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JLabel lblDica;
    private javax.swing.JPanel pnlForca;
    private javax.swing.JPanel pnlPalavra;
    private javax.swing.JLayeredPane pnlTeclado;
    // End of variables declaration//GEN-END:variables

    
    // FUNÇÕES AUXILIARES         
    private void carregaImagemForca(int tipo) {
        imgForca.setIcon(new javax.swing.ImageIcon(getClass().
                         getResource("/imagens/forca" + tipo + ".png")));
    }
    
    private void configuraTeclado() { // escutador das teclas alfabéticas
        // VERIFICA se a letra já foi utilizada
        ActionListener al = new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                String letra = e.getActionCommand();

                if (btnIniciar.isEnabled() && (letra.equals(btnIniciar.getText()))) {
                    inicializaJogo();
                } else {
                    jogada(letra);
                }
            }
        };
                
        // ADICIONA ActionListener para todos os botões do teclado
        for (Component c : pnlTeclado.getComponents()) {
            if (c instanceof JButton) {
                ((JButton) c).addActionListener(al);
            }
        }
        
        // jogo o foco no pnlTeclado para funcionar o KeyPressed
        pnlTeclado.requestFocus();
        
        // aguardo alguma tecla ser digitada
        pnlTeclado.addKeyListener(new KeyAdapter() {
            public void keyPressed(KeyEvent e) {
                if (btnIniciar.isEnabled() && (e.getKeyCode() == KeyEvent.VK_SPACE)) {
                    inicializaJogo();
                } else {
                    String letra = String.valueOf(e.getKeyChar()).toUpperCase();
                    
                    if (letra.matches("[A-Z]*")) { // aceita apenas letras
                        jogada(letra);
                    }
                }
            }
        });    
    }       
    
    private void criaEditsLetras() { // sorteia a palavra e prepara edits para as letras
        Palavra palavra = new Palavra();
        String secreta = palavra.sortear();
        String texto[] = secreta.split(";");
        
        pnlPalavra.repaint(); 
        lblDica.setText(texto[1]);
        
        // CRIA os edits das letras da palavra secreta
        for (int i = 0; i < texto[0].length(); i++) {
            String nome = "Letra" + Integer.toString(i);
            JTextField letra = new JTextField(nome);
            letra.setText(texto[0].substring(i, i + 1));
            letra.setBounds(34 * i + 5, 15, 34, 34);
            letra.setFont(new Font("dialog", Font.BOLD, 17));
            letra.setHorizontalAlignment(letra.CENTER);
            letra.setForeground(Color.white); // esconde a letra
            
            pnlPalavra.add(letra);

            letra.setVisible(true);
        }
    }

    private void inicializaJogo() { // inicializa a interface do jogo
        contAcertos = contErros = 0;
         
        pintaEditLetras(EDT_LIMPA, null);  
        
        pintaLetraTeclado("", Color.LIGHT_GRAY);
        
        carregaImagemForca(0);
        
        criaEditsLetras();
        
        btnIniciar.setEnabled(false);
        
        pnlTeclado.requestFocus();
    }

    private boolean isLetraUsada(String letra) { // verifica se a letra já foi teclada
        boolean retorno = false;
        
        for (Component b : pnlTeclado.getComponents()) {
            if (b instanceof JButton) {
                if (((JButton) b).getText().equals(letra)) {
                    retorno = !((JButton) b).getBackground().equals(Color.LIGHT_GRAY);
                    
                    break;
                }
            }
        }
        
        return retorno;
    }
 
    private void jogada(String letra) {
        int status = ST_JOGANDO;

        if (pnlPalavra.getComponents().length > 0) { // só ativa teclado caso a palavra tenha sido sorteada
            if (!isLetraUsada(letra)) {
                boolean flagAcertouLetra = false;

                flagAcertouLetra = pintaEditLetras(EDT_PROCURA, letra);

                if (!flagAcertouLetra) {
                    pintaLetraTeclado(letra, Color.red);

                    contErros++;

                    carregaImagemForca(contErros); // carrega a imagem do enforcamento 
                }
            }

            // VITÓRIA / DERROTA
            if (contAcertos == pnlPalavra.getComponents().length - 1) { // vitória (edits - lblDica)
                if (contErros > 0) { // liberta o boneco se tiver iniciado o enforcamento
                    carregaImagemForca(9);  
                }

                status = ST_VITORIA;
            } else if (contErros == 8) { // derrota
                pintaEditLetras(EDT_MOSTRA, null);  // mostra as letras que faltam na palavra

                status = ST_DERROTA;
            }
        }

        if (status != ST_JOGANDO) {
            btnIniciar.setEnabled(true);
        }
    }

    private boolean pintaEditLetras(int op, String letra) {
        boolean flagUsouLetra = false;
        
        for (Component c : pnlPalavra.getComponents()) {
            if (c instanceof JTextField) {
                switch (op) {
                    case EDT_LIMPA:
                        // DESTROI Edits existentes
                        pnlPalavra.remove((JTextField) c);
                        break;
                    case EDT_MOSTRA:
                        // MOSTRA letras que faltavam
                        if (((JTextField) c).getForeground().equals(Color.white)) {
                            
                            ((JTextField) c).setForeground(Color.red);
                            ((JTextField) c).setBackground(Color.yellow);
                            
                        }   break;
                    case EDT_PROCURA:                        
                        if (((JTextField) c).getText().equals(letra)) {
                            if (((JTextField) c).getForeground().equals(Color.white)) {
                            
                                ((JTextField) c).setForeground(Color.black);
                            
                                contAcertos++;  
                                
                                pintaLetraTeclado(letra, Color.green);
                            }

                            flagUsouLetra = true;
                            
                        }   break;
                    default:
                        break;
                }
            }
        }
    
        return flagUsouLetra;
    }

    private void pintaLetraTeclado(String letra, Color cor) { // responsável por pintar as teclas
        for (Component b : pnlTeclado.getComponents()) {
            if (b instanceof JButton) {
                if ((letra.equals("")) || (((JButton) b).getText().equals(letra))) {
                   ((JButton) b).setBackground(cor);
                   
                   ((JButton) b).setOpaque(letra.equals(""));
                }
            }
        }
    }   
}


